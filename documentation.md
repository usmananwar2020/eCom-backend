**1. Users**
Register
Login (JWT authentication)
Profile

**2. Products**
Create product (Admin)
Get product list
Get product details

**3. Cart**
Add product to cart
Remove product from cart
View cart

**4. Orders**
Place order (from cart)
Get order history

ecommerce-backend/
â”‚â”€â”€ src/
â”‚   â”œâ”€â”€ models/         # MongoDB schemas
â”‚   â”‚    â”œâ”€â”€ User.js
â”‚   â”‚    â”œâ”€â”€ Product.js
â”‚   â”‚    â”œâ”€â”€ Order.js
â”‚   â”‚    â””â”€â”€ Cart.js
â”‚   â”œâ”€â”€ routes/         # Express routes
â”‚   â”‚    â”œâ”€â”€ authRoutes.js
â”‚   â”‚    â”œâ”€â”€ productRoutes.js
â”‚   â”‚    â”œâ”€â”€ cartRoutes.js
â”‚   â”‚    â””â”€â”€ orderRoutes.js
â”‚   â”œâ”€â”€ controllers/    # Logic
â”‚   â”œâ”€â”€ middlewares/    # auth, validation
â”‚   â”œâ”€â”€ app.js          # Express app
â”‚   â””â”€â”€ server.js       # Entry point
â”‚â”€â”€ package.json
â”‚â”€â”€ .env

**Core APIs (Express + MongoDB)**

**Auth**
POST /api/auth/register â†’ create user
POST /api/auth/login â†’ login + return JWT

**Products**
GET /api/products â†’ list products
GET /api/products/:id â†’ product details
POST /api/products â†’ add product (admin only)

**Cart**
POST /api/cart/add â†’ add to cart
POST /api/cart/remove â†’ remove item
GET /api/cart â†’ get userâ€™s cart

**Orders**
POST /api/orders â†’ create order from cart
GET /api/orders â†’ get userâ€™s orders


ğŸ‘¤ Users Collection
| Field       | Type     | Notes                                    |
| ----------- | -------- | ---------------------------------------- |
| `\_id`       | ObjectId | Auto-generated by MongoDB                |
| `name`      | String   | Full name of the user                    |
| `email`     | String   | Unique, required                         |
| `password`  | String   | Hashed (never store plain text)          |
| `role`      | String   | `"user"` or `"admin"` (default `"user"`) |
| `createdAt` | Date     | Auto timestamp                           |
| `updatedAt` | Date     | Auto timestamp                           |

ğŸ“¦ Products Collection
| Field         | Type     | Notes                    |
| ------------- | -------- | ------------------------ |
| `\_id`         | ObjectId | Auto-generated           |
| `name`        | String   | Product name             |
| `description` | String   | Short info about product |
| `price`       | Number   | Price of product         |
| `stock`       | Number   | Quantity available       |
| `createdAt`   | Date     | Auto timestamp           |
| `updatedAt`   | Date     | Auto timestamp           |

ğŸ›’ Cart Collection
| Field           | Type     | Notes                       |
| --------------- | -------- | --------------------------- |
| `\_id`           | ObjectId | Auto-generated              |
| `userId`        | ObjectId | Reference to `Users.\_id`    |
| `products`      | Array    | List of products in cart    |
| â””â”€â”€ `productId` | ObjectId | Reference to `Products.\_id` |
| â””â”€â”€ `quantity`  | Number   | How many of this product    |
| `createdAt`     | Date     | Auto timestamp              |
| `updatedAt`     | Date     | Auto timestamp              |

ğŸ“¦â¡ï¸ğŸ‘¤ Orders Collection
| Field           | Type     | Notes                                |
| --------------- | -------- | ------------------------------------ |
| `\_id`           | ObjectId | Auto-generated                       |
| `userId`        | ObjectId | Reference to `Users.\_id`             |
| `products`      | Array    | List of ordered products             |
| â””â”€â”€ `productId` | ObjectId | Reference to `Products.\_id`          |
| â””â”€â”€ `quantity`  | Number   | Quantity ordered                     |
| `totalAmount`   | Number   | Sum of all product prices Ã— quantity |
| `status`        | String   | `"pending"`, `"paid"`, `"shipped"`   |
| `createdAt`     | Date     | Auto timestamp                       |
| `updatedAt`     | Date     | Auto timestamp                       |

**ğŸ›’ MVP E-commerce Backend Business Flow**

**1. User Flow (Authentication \& Roles)**
**Registration**
User signs up with name, email, password.
System hashes password and stores user in Users collection.
User role is "user" by default; you can create "admin" manually.

**Login**
User logs in with email and password.
System checks credentials, generates JWT token.
JWT is required to access all protected APIs (cart, orders, etc.).




**2. Product Flow (Admin â†’ Customer)**
**Admin Actions**
Admin adds products (name, description, price, stock) to Products collection.
Admin can update stock or edit products.

**Customer Actions**
User fetches product list â†’ GET /products.
User fetches details of a product â†’ GET /products/:id.




**3. Cart Flow (Userâ€™s temporary basket)**
**Add to Cart**
User selects a product and quantity.
Request sent to backend â†’ POST /cart/add.
Backend checks:
* If product already in cart â†’ increase quantity.
* Else â†’ add new product entry.
Stored in Cart collection under the userâ€™s userId.

**View Cart**
User can fetch cart â†’ GET /cart.
Backend joins Cart.products.productId with Products for details.

**Remove from Cart**
User removes an item â†’ POST /cart/remove.
Backend updates Cart.products array.



**4. Order Flow (Cart â†’ Order)**
**Place Order**
User clicks â€œCheckoutâ€.
Backend fetches cart by userId.
System calculates totalAmount = sum(price Ã— quantity).
Backend creates an Order document:
* userId â†’ who placed order
* products â†’ array of items with productId + quantity
* totalAmount â†’ total price
* status = "pending"
Backend clears the userâ€™s cart.

**Payment (MVP simplification)**
* For now, assume payment is manual/offline.
* Later, integrate Stripe, PayPal, etc.

**Order Status**
Admin updates order status:
* "pending" â†’ default
* "paid" â†’ after payment
* "shipped" â†’ when delivered
User can check order history â†’ GET /orders.

**ğŸ”„ End-to-End Example Flow**

1. User registers â†’ POST /auth/register.
2. User logs in â†’ receives JWT token.
3. Admin creates products â†’ POST /products.
4. User browses products â†’ GET /products.
5. User adds product to cart â†’ POST /cart/add.
6. User views cart â†’ GET /cart.
7. User places order â†’ POST /orders.
8. Order stored \& cart cleared.
9. Admin updates order status â†’ PATCH /orders/:id.
10. User views order history â†’ GET /orders.