**1. Users**
Register
Login (JWT authentication)
Profile

**2. Products**
Create product (Admin)
Get product list
Get product details

**3. Cart**
Add product to cart
Remove product from cart
View cart

**4. Orders**
Place order (from cart)
Get order history

ecommerce-backend/
│── src/
│   ├── models/         # MongoDB schemas
│   │    ├── User.js
│   │    ├── Product.js
│   │    ├── Order.js
│   │    └── Cart.js
│   ├── routes/         # Express routes
│   │    ├── authRoutes.js
│   │    ├── productRoutes.js
│   │    ├── cartRoutes.js
│   │    └── orderRoutes.js
│   ├── controllers/    # Logic
│   ├── middlewares/    # auth, validation
│   ├── app.js          # Express app
│   └── server.js       # Entry point
│── package.json
│── .env

**Core APIs (Express + MongoDB)**

**Auth**
POST /api/auth/register → create user
POST /api/auth/login → login + return JWT

**Products**
GET /api/products → list products
GET /api/products/:id → product details
POST /api/products → add product (admin only)

**Cart**
POST /api/cart/add → add to cart
POST /api/cart/remove → remove item
GET /api/cart → get user’s cart

**Orders**
POST /api/orders → create order from cart
GET /api/orders → get user’s orders


👤 Users Collection
| Field       | Type     | Notes                                    |
| ----------- | -------- | ---------------------------------------- |
| `\_id`       | ObjectId | Auto-generated by MongoDB                |
| `name`      | String   | Full name of the user                    |
| `email`     | String   | Unique, required                         |
| `password`  | String   | Hashed (never store plain text)          |
| `role`      | String   | `"user"` or `"admin"` (default `"user"`) |
| `createdAt` | Date     | Auto timestamp                           |
| `updatedAt` | Date     | Auto timestamp                           |

📦 Products Collection
| Field         | Type     | Notes                    |
| ------------- | -------- | ------------------------ |
| `\_id`         | ObjectId | Auto-generated           |
| `name`        | String   | Product name             |
| `description` | String   | Short info about product |
| `price`       | Number   | Price of product         |
| `stock`       | Number   | Quantity available       |
| `createdAt`   | Date     | Auto timestamp           |
| `updatedAt`   | Date     | Auto timestamp           |

🛒 Cart Collection
| Field           | Type     | Notes                       |
| --------------- | -------- | --------------------------- |
| `\_id`           | ObjectId | Auto-generated              |
| `userId`        | ObjectId | Reference to `Users.\_id`    |
| `products`      | Array    | List of products in cart    |
| └── `productId` | ObjectId | Reference to `Products.\_id` |
| └── `quantity`  | Number   | How many of this product    |
| `createdAt`     | Date     | Auto timestamp              |
| `updatedAt`     | Date     | Auto timestamp              |

📦➡️👤 Orders Collection
| Field           | Type     | Notes                                |
| --------------- | -------- | ------------------------------------ |
| `\_id`           | ObjectId | Auto-generated                       |
| `userId`        | ObjectId | Reference to `Users.\_id`             |
| `products`      | Array    | List of ordered products             |
| └── `productId` | ObjectId | Reference to `Products.\_id`          |
| └── `quantity`  | Number   | Quantity ordered                     |
| `totalAmount`   | Number   | Sum of all product prices × quantity |
| `status`        | String   | `"pending"`, `"paid"`, `"shipped"`   |
| `createdAt`     | Date     | Auto timestamp                       |
| `updatedAt`     | Date     | Auto timestamp                       |

**🛒 MVP E-commerce Backend Business Flow**

**1. User Flow (Authentication \& Roles)**
**Registration**
User signs up with name, email, password.
System hashes password and stores user in Users collection.
User role is "user" by default; you can create "admin" manually.

**Login**
User logs in with email and password.
System checks credentials, generates JWT token.
JWT is required to access all protected APIs (cart, orders, etc.).




**2. Product Flow (Admin → Customer)**
**Admin Actions**
Admin adds products (name, description, price, stock) to Products collection.
Admin can update stock or edit products.

**Customer Actions**
User fetches product list → GET /products.
User fetches details of a product → GET /products/:id.




**3. Cart Flow (User’s temporary basket)**
**Add to Cart**
User selects a product and quantity.
Request sent to backend → POST /cart/add.
Backend checks:
* If product already in cart → increase quantity.
* Else → add new product entry.
Stored in Cart collection under the user’s userId.

**View Cart**
User can fetch cart → GET /cart.
Backend joins Cart.products.productId with Products for details.

**Remove from Cart**
User removes an item → POST /cart/remove.
Backend updates Cart.products array.



**4. Order Flow (Cart → Order)**
**Place Order**
User clicks “Checkout”.
Backend fetches cart by userId.
System calculates totalAmount = sum(price × quantity).
Backend creates an Order document:
* userId → who placed order
* products → array of items with productId + quantity
* totalAmount → total price
* status = "pending"
Backend clears the user’s cart.

**Payment (MVP simplification)**
* For now, assume payment is manual/offline.
* Later, integrate Stripe, PayPal, etc.

**Order Status**
Admin updates order status:
* "pending" → default
* "paid" → after payment
* "shipped" → when delivered
User can check order history → GET /orders.

**🔄 End-to-End Example Flow**

1. User registers → POST /auth/register.
2. User logs in → receives JWT token.
3. Admin creates products → POST /products.
4. User browses products → GET /products.
5. User adds product to cart → POST /cart/add.
6. User views cart → GET /cart.
7. User places order → POST /orders.
8. Order stored \& cart cleared.
9. Admin updates order status → PATCH /orders/:id.
10. User views order history → GET /orders.